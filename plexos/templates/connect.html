{% load static %}

{% block body %}
<div class="tab-pane fade in active" id="connect" role="tabpanel">
	<div class="row">
		<h3> Connect To Server </h3>
		<hr/>
		{% if message.type == 'success' %}
			<h4> Currently connected to {{sessionInfo.server}} as {{sessionInfo.username}}</h4>
		{% else %}
		<form method="POST" action="" class="form-inline">
			{% csrf_token %}
			<p>
				<label for="inputServer">Server</label>
				<input style="width: 25%;" name="server" type="text" class="form-control" placeholder={{ userServer }} required autofocus>
				<label for="inputPassword">Username</label>
				<input style="width: 25%" name="username" type="text" class="form-control" placeholder={{userUsername}} required autofocus>
				<label for="inputPassword">Password</label>
				<input style="width: 25%" name="password" type="password" class="form-control" placeholder="Password" required autofocus>
			</p>
			<div style="padding: 20px 0px">
				<div style="float:right">
					<button name="connectButton" id="connectServerConnectButton" value="Connect&Button" type="submit" class="connect btn btn-primary">Connect</button>
				</div>
			</div>
		</form>
		{% endif %}
	</div>
	<hr />
	<div class="row">
		<h3> Upload </h3>
		<hr />
		<form method="post" action="">
			{% csrf_token %}
			<p>
				{% if message.type == 'success' %}
					{{ form.url }}
				{% endif %}
			</p>
			<div style="padding: 20px 0px">
				<div style="float:right">
					<button name="uploadButton" id="connectServerUplaodButton" value="Upload&Button" type="submit" class="connect btn btn-primary">Upload</button>
				</div>
			</div>
		</form>
	</div>
	<hr />
	<div class="row" id="datasetDiv">
		<h3> Datasets </h3>
		<hr />
		<table>
			<tr>
				{% for dataset,versions in folder.items %}
				{% if dataset %}
				<td>
					<div>
						<a id="datasetPopupLink" onclick="displayDatasetDiv()">
							<figure>
								<img class="mb-4" src="{% static 'img/Spreadsheet-icon.png' %}" alt="" width="200" height="200">
								<figcaption>{{dataset|truncatechars:15}}</figcaption>
							</figure>
						</a>
						<div style="padding: 20px;">
							<form method="POST" action="" class="form-inline">
								{% csrf_token %}
								<p>
									<input style=" display: none" name="dataset" type="text"  class="form-control" value="{{dataset}}" required autofocus />
									<input style=" display: none" name="version" type="text"  class="form-control" value="{{versions|last}}" required autofocus />
								</p>
								<button name="downloadButton" value="download&Button" type="submit" class="connect btn btn-primary">Download</button>
								<button name="launchButton" value="launch&Button" type="submit" class="connect btn btn-primary">Launch</button>
							</form>
						</div>
					</div>
				</td>
				{% endif %}
				{% endfor %}
			</tr>
		</table>
	</div>
</div>
    <hr /> 
{% endblock %}
